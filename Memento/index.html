<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Memento Design Pattern</title>
        <link rel="stylesheet" href="../styles.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"
        />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

        <!-- and it's easy to individually load additional languages -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    </head>
    <body>
        <div class="container">
            <nav class="navbar">
                <div class="navbar-brand">
                    <a href="../">Design Patterns</a>
                </div>
                <ul class="navbar-nav">
                    <li><a href="../">Home</a></li>
                </ul>
            </nav>
            <h1 id="memento-design-pattern">Memento Design Pattern</h1>
            <p>
                The Memento design pattern is a behavioral design pattern used
                to capture and restore the internal state of an object without
                exposing its implementation details.
            </p>
            <h2 id="table-of-contents">Table of Contents</h2>
            <ul>
                <li>
                    <a href="#components-of-memento-design-pattern"
                        >Components of Memento Design Pattern</a
                    >
                </li>
                <li><a href="#implementation">Implementation</a></li>
            </ul>
            <h2 id="components-of-memento-design-pattern">
                Components of Memento Design Pattern
            </h2>
            <p><img src="uml.png" alt="uml" /></p>
            <ol>
                <li>
                    <p>
                        <strong>Originator</strong>: This component is
                        responsible for creating and managing the state of an
                        object. It has methods to set and get the object’s
                        state, and it can create Memento objects to store its
                        state. The Originator communicates directly with the
                        Memento to create snapshots of its state and to restore
                        its state from a snapshot.
                    </p>
                </li>
                <li>
                    <p>
                        <strong>Memento</strong>: The Memento is an object that
                        stores the state of the Originator at a particular point
                        in time. It only provides a way to retrieve the state,
                        without allowing direct modification. This ensures that
                        the state remains
                    </p>
                </li>
                <li>
                    <p>
                        <strong>Caretaker</strong>: The Caretaker is responsible
                        for keeping track of Memento objects. It doesn’t know
                        the details of the state stored in the Memento but can
                        request Mementos from the Originator to save or restore
                        the object’s state.
                    </p>
                </li>
                <li>
                    <p>
                        <strong>Client</strong>: Typically represented as the
                        part of the application or system that interacts with
                        the Originator and Caretaker to achieve specific
                        functionality. The client initiates requests to save or
                        restore the state of the Originator through the
                        Caretaker.
                    </p>
                </li>
            </ol>
            <h2 id="implementation">Implementation</h2>
            <p><img src="implementation.png" alt="implementation" /></p>
            <ol>
                <li>
                    <p><strong>Originator (Document)</strong>:</p>
                    <pre><code class="lang-java"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Document {
     <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> content;

     <span class="hljs-keyword">public</span> Document(<span class="hljs-keyword">String</span> content) {
         <span class="hljs-keyword">this</span>.content = content;
     }

     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-built_in">write</span>(<span class="hljs-keyword">String</span> <span class="hljs-built_in">text</span>) {
         <span class="hljs-keyword">this</span>.content += <span class="hljs-built_in">text</span>;
     }

     <span class="hljs-keyword">public</span> <span class="hljs-keyword">String</span> getContent() {
         <span class="hljs-built_in">return</span> <span class="hljs-keyword">this</span>.content;
     }

     <span class="hljs-keyword">public</span> DocumentMemento createMemento() {
         <span class="hljs-built_in">return</span> <span class="hljs-keyword">new</span> DocumentMemento(<span class="hljs-keyword">this</span>.content);
     }

     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> restoreFromMemento(DocumentMemento memento) {
         <span class="hljs-keyword">this</span>.content = memento.getSavedContent();
     }
 }
</code></pre>
                </li>
                <li>
                    <p><strong>Memento</strong>:</p>
                    <pre><code class="lang-java"> <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DocumentMemento</span> </span>{
     <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> content;

     <span class="hljs-keyword">public</span> DocumentMemento(<span class="hljs-keyword">String</span> content) {
         <span class="hljs-built_in">this</span>.content = content;
     }

     <span class="hljs-keyword">public</span> <span class="hljs-keyword">String</span> getSavedContent() {
         <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.content;
     }
 }
</code></pre>
                </li>
                <li>
                    <p><strong>Caretaker(History)</strong>:</p>
                    <pre><code class="lang-java"> import java.util.ArrayList;
 import java.util.List;

 <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">History</span> {
     <span class="hljs-keyword">private</span> List&lt;DocumentMemento&gt; mementos;

     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">History</span>(<span class="hljs-params"></span>) </span>{
         <span class="hljs-keyword">this</span>.mementos = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
     }

     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addMemento</span>(<span class="hljs-params">DocumentMemento memento</span>) </span>{
         <span class="hljs-keyword">this</span>.mementos.<span class="hljs-keyword">add</span>(memento);
     }

     <span class="hljs-function"><span class="hljs-keyword">public</span> DocumentMemento <span class="hljs-title">getMemento</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> index</span>) </span>{
         <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mementos.<span class="hljs-keyword">get</span>(index);
     }
 }
</code></pre>
                </li>
                <li>
                    <p><strong>Client</strong>:</p>
                    <pre><code class="lang-java"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Main {
     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> main(<span class="hljs-built_in">String</span>[] args) {
         Document <span class="hljs-built_in">document</span> = <span class="hljs-keyword">new</span> Document(<span class="hljs-string">"Initial content\n"</span>);
         History history = <span class="hljs-keyword">new</span> History();

         <span class="hljs-comment">// Write some content</span>
         <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"Additional content\n"</span>);
         history.addMemento(<span class="hljs-built_in">document</span>.createMemento());

         <span class="hljs-comment">// Write more content</span>
         <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"More content\n"</span>);
         history.addMemento(<span class="hljs-built_in">document</span>.createMemento());

         <span class="hljs-comment">// Restore to previous state</span>
         <span class="hljs-built_in">document</span>.restoreFromMemento(history.getMemento(<span class="hljs-number">1</span>));

         <span class="hljs-comment">// Print document content</span>
         System.out.println(<span class="hljs-built_in">document</span>.getContent());
     }
 }
</code></pre>
                </li>
            </ol>
        </div>
    </body>
</html>
